<br/>

```csharp
from flask import Flask, Response

{
    
      #region [ 常用方法 ]
    
      
          
}


```





<!-- tabs:start -->

#### **JSON**

!> 解决中文乱码 [`app.json.ensure_ascii = False`]

```shell
from flask import Flask, jsonify

@app.route("/M1")
def me_api():
    data = {
        "username": "张三",
        "Age": 30
    }
    return jsonify(data)

@app.route("/M1")
def me_api():
    return {
        "username": user.username,
        "theme": user.theme,
        "image": url_for("user_image", filename=user.image),
    }
    
    
```



#### **Cookie**

```shell
@app.route('/')
def index():
    resp.set_cookie('username', 'the username')
    return resp
    
    
```



#### **[ 重定向 ]**

```shell
from flask import redirect, url_for

@app.route('/')
def index():
    return redirect(url_for('M2')) # 重定向端点( M2 非路由名称 )
    return redirect(url_for('www.baidu.com'))
    
@app.route("/MQ")
def M2():
   return "<p>Hello, World!</p>"
   
   
```



#### **[ 抛出异常 ]**

```shell
from flask import Flask, abort

@app.route("/M1")
def me_api():
    abort(404, description="未找到资源")
    

```

```shell
# [ 异常模版 ]
@app.errorhandler(404)
def page_not_found(error):
    return render_template('page_not_found.html'), 404


```



#### **[ Session ]**

```shell
from flask import Flask, session, redirect, url_for, request

app = Flask(__name__)

# 随机生成 Session.key
import secrets
print(secrets.token_hex())
app.secret_key = 'your-secure-random-string'

# 示例路由，展示如何使用 session
@app.route('/')
def index():
    """
    主页路由，展示如何使用 Flask 的 session 功能。

    如果用户已登录，则显示欢迎信息；否则重定向到登录页面。
    """
    if 'username' in session:
        return f'Welcome, {session["username"]}!'
    return redirect(url_for('login'))

@app.route('/login', methods=['GET', 'POST'])
def login():
    """
    登录路由，处理用户的登录请求。

    如果请求方法为 POST，则从表单中获取用户名和密码，
    并将其存储在 session 中。如果请求方法为 GET，则显示登录表单。
    """
    if request.method == 'POST':
        session['username'] = request.form['username']
        return redirect(url_for('index'))
    return '''
        <form method="post">
            Username: <input type="text" name="username"><br>
            Password: <input type="password" name="password"><br>
            <input type="submit" value="Login">
        </form>
    '''

@app.route('/logout')
def logout():
    """
    注销路由，清除 session 中的用户信息。

    清除 session 中的用户名，并重定向到主页。
    """
    session.pop('username', None)
    return redirect(url_for('index'))

if __name__ == '__main__':
    app.run(debug=True)


```



<!-- tabs:end -->











